/**
 * @package     zlux
 * @version     2.0.2
 * @author      ZOOlanders - http://zoolanders.com
 * @license     GNU General Public License v2 or later
 */

!function(t,e){"use strict";var a,i=0,n=!1,r={},s={defaults:{apps:"",types:"",categories:"",tags:"",authors:""},init:function(){var a=this;e.extensions.manager.init.apply(this),this.id=i++,a.filter={},this.DTsettings.ajax=function(t,e,i){a.ajax(t,e,i)},t.extend(a.DTsettings.language,{emptyTable:e.lang._("IM_NO_ITEMS_FOUND"),info:e.lang._("IM_PAGINATION_INFO")})},DTsettings:{pageLength:5,columns:[{title:"",data:"_itemname","class":"zx-manager-resource-name uk-width-1-1",render:function(t,e){return"display"===e?"":t}}],initComplete:function(){},rowCallback:function(a,i){var n=i;n.details=[],n.details.push(i.application.name+" / "+i.type.name+" / "+i.id),n.details.push(i.created),i.author.name&&n.details.push({name:$this._("AUTHOR"),value:i.author.name});var r=e.managerResource(a,n);r.pushData(n),r.element.addClass("zx-manager-resource"),t(".zx-manager-resource-name",r.element).html("").append(r.render())},preDrawCallback:function(){},drawCallback:function(){}},ajax:function(a,i){{var n=this,s=n.filter.apps?n.filter.apps:n.options.apps,o=n.filter.types?n.filter.types:n.options.types,p=n.filter.cats?n.filter.cats:n.options.categories,l=n.filter.tags?n.filter.tags:n.options.tags;n.filter.authors?n.filter.authors:n.options.authors}a.apps=n.options.apps,a.types=n.options.types,a.categories=n.options.categories,a.tags=n.options.tags,a.authors=n.options.authors,a.filter_apps=s,a.filter_types=o,a.filter_cats=p,a.filter_tags=l,a.zlux2=!0;var c=a.draw;a.draw=0;var u=String(t.param(a)).hashCode();a.draw=c,e.ajax.requestAndNotify({url:e.url.get("ajax:",{controller:"zlux",task:"getItemsManagerData"}),data:a,queue:"itemsmanager"}).done(function(t){r[u]=t,i(t)})},reload:function(){var t=this;t.resources.DataTable().ajax.reload()},preResourceDelete:function(){}};e.component("itempicker",t.extend(!0,{},s,e.extensions.managerDropdown,{init:function(){var t=this;s.init.apply(this),e.extensions.managerDropdown.init.apply(this),this.on("click",function(){n!==t&&t.pick(this.value)}),a=this.initDropdown(a).addClass("zx-itempicker")},DTsettings:{ordering:!1,columns:[{title:"",data:"_itemname","class":"zx-x-main-column uk-width-1-1",render:function(t,e){return"display"===e?"":t}}],rowCallback:function(a,i){var n=i;n.details=[],n.details.push(i.application.name+" / "+i.type.name+" / "+i.id);var r=e.managerResource(a,n);r.pushData(n),r.element.addClass("zx-manager-resource"),t(".zx-x-main-column",r.element).append(r.render())}},pick:function(t){e.extensions.managerDropdown.pick.apply(this,[t]),n=this}})),t(document).on("focus.itempicker.zlux","[data-zx-itempicker]",function(a){var i=t(this);if(!i.data("itempicker")){a.preventDefault();{e.itempicker(i,t.UIkit.Utils.options(i.attr("data-zx-itempicker")))}i.trigger("focus")}}),t(document).on("click.itempicker.zlux",function(e){var i=t(e.target);!n||i[0]==a[0]||i.data("itempicker")||i.parents(".zx-itempicker:first").length||(a.hide(),n=!1)}),t.UIkit.ready(function(a){t("[data-zx-itempicker]",a).each(function(){var a=t(this);if(!a.data("itempicker")){e.itempicker(a,t.UIkit.Utils.options(a.attr("data-zx-itempicker")))}})})}(jQuery,zlux,UIkit);