(function(a){var c=function(b){this.options=a.extend({},this.options,b);this.events={}};c.prototype=a.extend(c.prototype,a.fn.zluxMain.prototype,{name:"ElementFilespro",options:{root:"",extensions:"",storage:"",fileMode:"",max_file_size:"",title:""},events:{},initialize:function(b,d){this.options=a.extend({},a.fn.zluxMain.prototype.options,this.options,d);var c=this;c.element=b;b.on("click","p.add a",function(){c.apply(a("input.filespro",b).add("input.mediapro-element",b))});c.apply(a("input.filespro", b).add("input.mediapro-element",b))},apply:function(c){var d=this;c.each(function(c,b){var e=a(b);if(!a(b).data("initialized")){var f="filespro-element-"+c,g=e.closest(".row").addClass("zl-bootstrap"),l=e.hasClass("image-element")?!0:!1;e.attr("id",f);d.zluxpreview=a.fn.zluxPreview();f=a("span.zlux-x-filedata",g).data("zlux-storage");e.zluxDialogFilesManager({root:d.options.images,extensions:d.options.extensions,storage:"local",max_file_size:"1024kb",title:d.options.title,storage:f.engine,storage_params:f, root:f.root}).data("zluxDialogFilesManager").bind("ObjectSelected",function(c,b){if("files"!=d.options.fileMode||"file"==b.type)if("folders"!=d.options.fileMode||"folder"==b.type){var f=e.data("zluxDialogFilesManager")._getFullPath(b.name);e.val(f).trigger("change");a(".zlux-preview",g).remove();g.append(d.zluxpreview.renderPreviewDOM(b,l))}});f=a("span.zlux-x-filedata",g).data("zlux-data");!a.isEmptyObject(f)&&e.val()&&g.append(d.zluxpreview.renderPreviewDOM(f,l));a('<i class="icon-remove zlux-x-cancel-btn" />').insertAfter(e).on("click", function(){e.val("");a(".zlux-preview",g).remove()})}e.data("initialized",!0)})}});a.fn[c.prototype.name]=function(){var b=arguments,d=b[0]?b[0]:null;return this.each(function(){var h=a(this);if(c.prototype[d]&&h.data(c.prototype.name)&&"initialize"!=d)h.data(c.prototype.name)[d].apply(h.data(c.prototype.name),Array.prototype.slice.call(b,1));else if(!d||a.isPlainObject(d)){var k=new c;c.prototype.initialize&&k.initialize.apply(k,a.merge([h],b));h.data(c.prototype.name,k)}else a.error("Method "+d+ " does not exist on jQuery."+c.name)})}})(jQuery);