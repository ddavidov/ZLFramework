(function(c){var b=function(d){this.options=c.extend({},this.options,d);this.events={}};b.prototype=c.extend(b.prototype,c.fn.zluxMain.prototype,{name:"ElementFilespro",options:{root:"",extensions:"",storage:"",fileMode:""},events:{},initialize:function(d,a){this.options=c.extend({},c.fn.zluxMain.prototype.options,this.options,a);var b=this;b.element=d;d.on("click","p.add a",function(){b.apply(c("input.filespro",d))});b.apply(c("input.filespro",d))},apply:function(b){var a=this;b.each(function(b, d){var f=c(d);if(!c(d).data("initialized")){f.attr("id","filespro-element-"+b);a.wrapper=f.closest(".row").addClass("zl-bootstrap");a.zluxpreview=c.fn.zluxPreview();f.zluxDialogFilesManager({root:a.options.images,extensions:a.options.extensions,storage:a.options.storage}).data("zluxDialogFilesManager").bind("ObjectSelected",function(b,d){if(!("files"==a.options.fileMode&&"file"!=d.data.type)&&!("folders"==a.options.fileMode&&"folder"!=d.data.type)){var e=b.oTable.fnSettings().sCurrentPath+"/"+d.data.path; f.val(e).trigger("change");c(".zlux-preview",a.wrapper).remove();a.wrapper.append(a.zluxpreview.renderPreviewDOM(d.data))}});var h=c("span.zlux-x-filedata",a.wrapper).data("zlux-data");a.wrapper.append(a.zluxpreview.renderPreviewDOM(h));c('<i class="icon-remove zlux-x-cancel-btn" />').insertAfter(f).on("click",function(){f.val("");c(".zlux-preview",a.wrapper).remove()})}f.data("initialized",!0)})}});c.fn[b.prototype.name]=function(){var d=arguments,a=d[0]?d[0]:null;return this.each(function(){var e= c(this);if(b.prototype[a]&&e.data(b.prototype.name)&&"initialize"!=a)e.data(b.prototype.name)[a].apply(e.data(b.prototype.name),Array.prototype.slice.call(d,1));else if(!a||c.isPlainObject(a)){var g=new b;b.prototype.initialize&&g.initialize.apply(g,c.merge([e],d));e.data(b.prototype.name,g)}else c.error("Method "+a+" does not exist on jQuery."+b.name)})}})(jQuery);